<link rel="stylesheet" href="/leaflet-1.4/leaflet.css" />
<link rel="stylesheet" href="/Leaflet.markercluster-1.4.1/dist/MarkerCluster.css" />
<link rel="stylesheet" href="/Leaflet.markercluster-1.4.1/dist/MarkerCluster.Default.css" />
<%= Mapstraction.header(current_map_type, :host => request.host) %>
<meta http-equiv="content-type" content="text/html;charset=utf-8" />
<%= stylesheet_link_tag (@site.style.to_s + '/scaffold.css') %>
<%= stylesheet_link_tag (@site.style.to_s + '/main.css') %>
<%= stylesheet_link_tag ('select2.css') %>
<% if !@site.custom_css.nil? %>
<%= stylesheet_link_tag (@site.custom_css.to_s + '/custom.css') %>
<% end %>
<link rel="shortcut icon" href="/images/dcp.ico" type="image/x-icon" />
<link rel="alternate" type="application/rss+xml" title="find.coop changes" href="<%= url_for :controller => 'search', :action => 'feed' %>" />
<%= javascript_include_tag 'jquery-1.7.2.min' %>
<%= javascript_include_tag :defaults, 'tabs', 'carousel-min', :cache => 'javasonry3' %>
<%= javascript_include_tag 'select2.min' %>
<%= javascript_include_tag '/leaflet-1.4/leaflet' %>
<%= javascript_include_tag '/Leaflet.markercluster-1.4.1/dist/leaflet.markercluster.js' %>
<script>
function cluster_icon_create (cluster_count) {
  var size = 'small';
  if (count >= 10) {
    size = 'medium';
  } else if (count >= 100) {
    size = 'large';
  } else if (count >= 200) {
    size = 'huge';
  } else if (count >= 700) {
    size = 'giant';
  }
  return L.divIcon({
    html: `<div><span>${count}</span></div>`,
    className: `marker-cluster marker-cluster-${size}`,
    iconSize: new L.Point(40, 40)
  });
}
}
</script>
<%= javascript_include_tag 'findcoop' %>
<script src="/javascripts/solr_clustered_map.js" type="text/javascript"></script>
<%= content_tag("script", "", { "type" => "text/javascript", "src" => url_for(:controller => '/search', :action => 'render_js', 'src' => 'app_js') })%>
